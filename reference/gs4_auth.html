<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Authorize googlesheets4 — gs4_auth • googlesheets4</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">

<!--optional theme-->
<link href="../.css" rel="stylesheet">




<meta property="og:title" content="Authorize googlesheets4 — gs4_auth" />
<meta property="og:description" content="Authorize googlesheets4 to view and manage your Google Sheets. This function is a
wrapper around gargle::token_fetch().
By default, you are directed to a web browser, asked to sign in to your
Google account, and to grant googlesheets4 permission to operate on your
behalf with Google Sheets. By default, these user credentials are cached in a
folder below your home directory, ~/.R/gargle/gargle-oauth, from where
they can be automatically refreshed, as necessary. Storage at the user
level means the same token can be used across multiple projects and
tokens are less likely to be synced to the cloud by accident.
If you are interacting with R from a web-based platform, like RStudio
Server or Cloud, you need to use a variant of this flow, known as
out-of-band auth (&quot;oob&quot;). If this does not happen automatically, you
can request it yourself with use_oob = TRUE or, more persistently, by
setting an option via options(gargle_oob_default = TRUE)." />
<meta property="og:image" content="https://googlesheets4.tidyverse.org/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">googlesheets4</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/googlesheets4.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/articles/read-sheets.html">Read Sheets</a>
    </li>
    <li>
      <a href="../articles/articles/write-sheets.html">Write Sheets</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Special topics</li>
    <li>
      <a href="../articles/articles/auth.html">googlesheets4 auth</a>
    </li>
    <li>
      <a href="../articles/articles/dates-and-times.html">Dates and times</a>
    </li>
    <li>
      <a href="../articles/articles/find-identify-sheets.html">Find and identify Sheets</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Connections to other packages</li>
    <li>
      <a href="../articles/articles/drive-and-sheets.html">Using googlesheets4 with googledrive</a>
    </li>
    <li>
      <a href="../articles/articles/fun-with-googledrive-and-readxl.html">Fun with googledrive and readxl</a>
    </li>
    <li>
      <a href="../articles/articles/googlesheets4-reprex.html">How to create a googlesheets4 reprex</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../articles/index.html">More...</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Blog posts</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/05/googlesheets4-0-2-0/">googlesheets4 0.2.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/tidyverse/googlesheets4/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Authorize googlesheets4</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidyverse/googlesheets4/blob/master/R/gs4_auth.R'><code>R/gs4_auth.R</code></a></small>
    <div class="hidden name"><code>gs4_auth.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Authorize googlesheets4 to view and manage your Google Sheets. This function is a
wrapper around <code><a href='https://gargle.r-lib.org/reference/token_fetch.html'>gargle::token_fetch()</a></code>.</p>
<p>By default, you are directed to a web browser, asked to sign in to your
Google account, and to grant googlesheets4 permission to operate on your
behalf with Google Sheets. By default, these user credentials are cached in a
folder below your home directory, <code>~/.R/gargle/gargle-oauth</code>, from where
they can be automatically refreshed, as necessary. Storage at the user
level means the same token can be used across multiple projects and
tokens are less likely to be synced to the cloud by accident.</p>
<p>If you are interacting with R from a web-based platform, like RStudio
Server or Cloud, you need to use a variant of this flow, known as
out-of-band auth ("oob"). If this does not happen automatically, you
can request it yourself with <code>use_oob = TRUE</code> or, more persistently, by
setting an option via <code><a href='https://rdrr.io/r/base/options.html'>options(gargle_oob_default = TRUE)</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>gs4_auth</span><span class='op'>(</span>
  email <span class='op'>=</span> <span class='fu'>gargle</span><span class='fu'>::</span><span class='fu'><a href='https://gargle.r-lib.org/reference/gargle_options.html'>gargle_oauth_email</a></span><span class='op'>(</span><span class='op'>)</span>,
  path <span class='op'>=</span> <span class='cn'>NULL</span>,
  scopes <span class='op'>=</span> <span class='st'>"https://www.googleapis.com/auth/spreadsheets"</span>,
  cache <span class='op'>=</span> <span class='fu'>gargle</span><span class='fu'>::</span><span class='fu'><a href='https://gargle.r-lib.org/reference/gargle_options.html'>gargle_oauth_cache</a></span><span class='op'>(</span><span class='op'>)</span>,
  use_oob <span class='op'>=</span> <span class='fu'>gargle</span><span class='fu'>::</span><span class='fu'><a href='https://gargle.r-lib.org/reference/gargle_options.html'>gargle_oob_default</a></span><span class='op'>(</span><span class='op'>)</span>,
  token <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>email</th>
      <td><p>Optional. Allows user to target a specific Google identity. If
specified, this is used for token lookup, i.e. to determine if a suitable
token is already available in the cache. If no such token is found, <code>email</code>
is used to pre-select the targetted Google identity in the OAuth chooser.
Note, however, that the email associated with a token when it's cached is
always determined from the token itself, never from this argument. Use <code>NA</code>
or <code>FALSE</code> to match nothing and force the OAuth dance in the browser. Use
<code>TRUE</code> to allow email auto-discovery, if exactly one matching token is
found in the cache. Defaults to the option named "gargle_oauth_email",
retrieved by <code><a href='https://gargle.r-lib.org/reference/gargle_options.html'>gargle::gargle_oauth_email()</a></code>.</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p>JSON identifying the service account, in one of the forms
supported for the <code>txt</code> argument of <code><a href='https://rdrr.io/pkg/jsonlite/man/fromJSON.html'>jsonlite::fromJSON()</a></code> (typically, a
file path or JSON string).</p></td>
    </tr>
    <tr>
      <th>scopes</th>
      <td><p>A character vector of scopes to request. Pick from those listed
at <a href='https://developers.google.com/identity/protocols/googlescopes'>https://developers.google.com/identity/protocols/googlescopes</a>.</p>
<p>For certain token flows, the
<code>"https://www.googleapis.com/auth/userinfo.email"</code> scope is unconditionally
included. This grants permission to retrieve the email address associated
with a token; gargle uses this to index cached OAuth tokens. This grants no
permission to view or send email. It is considered a low value scope and
does not appear on the consent screen.</p></td>
    </tr>
    <tr>
      <th>cache</th>
      <td><p>Specifies the OAuth token cache. Defaults to the option named
"gargle_oauth_cache", retrieved via <code><a href='https://gargle.r-lib.org/reference/gargle_options.html'>gargle::gargle_oauth_cache()</a></code>.</p></td>
    </tr>
    <tr>
      <th>use_oob</th>
      <td><p>Whether to prefer "out of band" authentication. Defaults to
the option named "gargle_oob_default", retrieved via
<code><a href='https://gargle.r-lib.org/reference/gargle_options.html'>gargle::gargle_oob_default()</a></code>.</p></td>
    </tr>
    <tr>
      <th>token</th>
      <td><p>A token with class <a href='https://httr.r-lib.org/reference/Token-class.html'>Token2.0</a> or an object of
httr's class <code>request</code>, i.e. a token that has been prepared with
<code><a href='https://httr.r-lib.org/reference/config.html'>httr::config()</a></code> and has a <a href='https://httr.r-lib.org/reference/Token-class.html'>Token2.0</a> in the
<code>auth_token</code> component.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Most users, most of the time, do not need to call <code>gs4_auth()</code>
explicitly -- it is triggered by the first action that requires
authorization. Even when called, the default arguments often suffice.
However, when necessary, this function allows the user to explicitly:</p><ul>
<li><p>Declare which Google identity to use, via an email address. If there
are multiple cached tokens, this can clarify which one to use. It can
also force googlesheets4 to switch from one identity to another. If
there's no cached token for the email, this triggers a return to the
browser to choose the identity and give consent.</p></li>
<li><p>Use a service account token.</p></li>
<li><p>Bring their own <a href='https://httr.r-lib.org/reference/Token-class.html'>Token2.0</a>.</p></li>
<li><p>Specify non-default behavior re: token caching and out-of-bound
authentication.</p></li>
</ul>

<p>For details on the many ways to find a token, see
<code><a href='https://gargle.r-lib.org/reference/token_fetch.html'>gargle::token_fetch()</a></code>. For deeper control over auth, use
<code><a href='gs4_auth_configure.html'>gs4_auth_configure()</a></code> to bring your own OAuth app or API key.
Read more about gargle options, see <a href='https://gargle.r-lib.org/reference/gargle_options.html'>gargle::gargle_options</a>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other auth functions: 
<code><a href='gs4_auth_configure.html'>gs4_auth_configure</a>()</code>,
<code><a href='gs4_deauth.html'>gs4_deauth</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='co'># load/refresh existing credentials, if available</span>
  <span class='co'># otherwise, go to browser for authentication and authorization</span>
  <span class='fu'>gs4_auth</span><span class='op'>(</span><span class='op'>)</span>

  <span class='co'># force use of a token associated with a specific email</span>
  <span class='fu'>gs4_auth</span><span class='op'>(</span>email <span class='op'>=</span> <span class='st'>"jenny@example.com"</span><span class='op'>)</span>

  <span class='co'># use a 'read only' scope, so it's impossible to edit or delete Sheets</span>
  <span class='fu'>gs4_auth</span><span class='op'>(</span>
    scopes <span class='op'>=</span> <span class='st'>"https://www.googleapis.com/auth/spreadsheets.readonly"</span>
  <span class='op'>)</span>

  <span class='co'># use a service account token</span>
  <span class='fu'>gs4_auth</span><span class='op'>(</span>path <span class='op'>=</span> <span class='st'>"foofy-83ee9e7c9c48.json"</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="tidyverse">
  <p>googlesheets4 is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href='https://jennybryan.org'>Jennifer Bryan</a>, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
   </div>

  


  </body>
</html>


